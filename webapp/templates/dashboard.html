{% extends "base.html" %}
{% block title %}Dashboard - Job Tracker{% endblock %}
{% block content %}
<h2>Dashboard</h2>

<div class="stats-grid">
    <a href="{{ url_for('jobs_list') }}" class="stat-link">
        <article>
            <header>Total Jobs</header>
            <p class="stat-number">{{ stats.total }}</p>
        </article>
    </a>
    <a href="{{ url_for('jobs_list', group='applied') }}" class="stat-link">
        <article>
            <header>Applied</header>
            <p class="stat-number">{{ stats.applied }}</p>
        </article>
    </a>
    <a href="{{ url_for('jobs_list', group='not_applied') }}" class="stat-link">
        <article>
            <header>Not Applied</header>
            <p class="stat-number">{{ stats.not_applied }}</p>
        </article>
    </a>
    <a href="{{ url_for('jobs_list', group='interviewing') }}" class="stat-link">
        <article>
            <header>Interviewing</header>
            <p class="stat-number">{{ stats.interviewing }}</p>
        </article>
    </a>
    <a href="{{ url_for('jobs_list', group='offers') }}" class="stat-link">
        <article>
            <header>Offers</header>
            <p class="stat-number">{{ stats.offers }}</p>
        </article>
    </a>
    <article>
        <header>Response Rate</header>
        <p class="stat-number">{{ stats.response_rate }}</p>
    </article>
</div>

<h3>Upcoming Follow-Ups</h3>
{% if followups %}
<figure>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Company</th>
            <th>Position</th>
            <th>Contact</th>
        </tr>
    </thead>
    <tbody>
        {% for fu in followups %}
        <tr>
            <td>{{ fu['Next Follow-Up'] }}</td>
            <td>
                {% if fu._index is defined %}
                <a href="{{ url_for('job_detail', index=fu._index) }}">{{ fu.Company }}</a>
                {% else %}
                {{ fu.Company }}
                {% endif %}
            </td>
            <td>{{ fu.Position }}</td>
            <td>
                {% if fu['Contact Name'] %}
                    {{ fu['Contact Name'] }}
                    {% if fu['Contact Email'] %}&lt;{{ fu['Contact Email'] }}&gt;{% endif %}
                {% else %}
                    &mdash;
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</figure>
{% else %}
<p>No follow-ups scheduled.</p>
{% endif %}
{% endblock %}
